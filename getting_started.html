
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>Getting started &#8212; Quantlib cython wrapper 0.1.1 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/sphinx_highlight.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Tutorial" href="tutorial.html" />
    <link rel="prev" title="Welcome to PyQL’s documentation" href="index.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="getting-started">
<h1>Getting started<a class="headerlink" href="#getting-started" title="Permalink to this heading">¶</a></h1>
<section id="pyql-an-overview">
<h2>PyQL - an overview<a class="headerlink" href="#pyql-an-overview" title="Permalink to this heading">¶</a></h2>
<p>Why building a new set of QuantLib wrappers for Python?</p>
<p>The SWIG wrappers provide a very good coverage of the library but have
a number of pain points:</p>
<ul class="simple">
<li><p>Few Pythonic optimisations in the syntax: the python code for invoking QuantLib functions looks like the C++ version;</p></li>
<li><p>No docstring or function signature are available on the Python side;</p></li>
<li><p>The debugging is complex, and any customization of the wrapper involves complex programming;</p></li>
<li><p>The build process is monolithic: any change to the wrapper requires the recompilation of the entire project;</p></li>
<li><p>Complete loss of the C++ code organisation with a flat namespace in Python;</p></li>
<li><p>SWIG typemaps development is not that fun.</p></li>
</ul>
<p>For those reasons, and to have the ability to expose some of the
QuantLib internals that could be very useful on the Python side, we
chose another road. PyQL is build on top of Cython and creates a thin
Pythonic layer on top of QuantLib. It allows a tight control on the
wrapping and provides higher level Python integration.</p>
<section id="features">
<h3>Features:<a class="headerlink" href="#features" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>Integration with standard datatypes (like datetime objects) and numpy arrays;</p></li>
<li><p>Simplifed API on the Python side (e.g. usage of Handles completely hidden from the user);</p></li>
<li><p>Support full docstring and expose detailed function signatures to Python;</p></li>
<li><p>Code organised in subpackages to provide a clean namespace, very close to the C++ code organisation;</p></li>
<li><p>Easy extendibility thanks to Cython and shorter build time when adding new functionalities;</p></li>
<li><p>Sphinx documentation.</p></li>
</ul>
</section>
</section>
<section id="building-and-installing-pyql">
<h2>Building and installing PyQL<a class="headerlink" href="#building-and-installing-pyql" title="Permalink to this heading">¶</a></h2>
<p>Prerequisites:</p>
<ul class="simple">
<li><p>Boost (version 1.55 or higher)</p></li>
<li><p><a class="reference external" href="http://www.quantlib.org">QuantLib</a> (version 1.5 or higher)</p></li>
<li><p><a class="reference external" href="http://www.cython.org">Cython</a> (version 0.19 or higher)</p></li>
</ul>
<p>Once the dependencies have been installed, enter the pyql root directory. Open the setup.py file
and configure the Boost and QuantLib include and library directories, then run</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="n">setup</span><span class="o">.</span><span class="n">py</span> <span class="n">build</span>
</pre></div>
</div>
</section>
<section id="installation-from-source">
<h2>Installation from source<a class="headerlink" href="#installation-from-source" title="Permalink to this heading">¶</a></h2>
<p>The following instructions explain how to build the project from source, on a Linux system.
The instructions have been tested on Ubuntu 12.04 LTS.</p>
<p>Prerequisites:</p>
<ul class="simple">
<li><p>python 2.7</p></li>
<li><p>C++ development environment</p></li>
<li><p>pandas 0.9</p></li>
</ul>
<ol class="arabic">
<li><p>Install Boost (taken from a nice <a class="reference external" href="https://coderwall.com/p/0atfug">post</a> by S. Zebardast)</p>
<ol class="loweralpha">
<li><p>Download the Boost source package</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>wget<span class="w"> </span>-O<span class="w"> </span>boost_1_55_0.tar.gz<span class="w"> </span><span class="se">\</span>
http://sourceforge.net/projects/boost/files/boost/1.55.0/boost_1_55_0.tar.gz/download
tar<span class="w"> </span>xzvf<span class="w"> </span>boost_1_55_0.tar.gz
</pre></div>
</div>
</li>
<li><p>Make sure you have the required libraries</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>apt-get<span class="w"> </span>update
sudo<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>build-essential<span class="w"> </span>g++<span class="w"> </span>python-dev<span class="w"> </span>autotools-dev<span class="w"> </span>libicu-dev<span class="w"> </span>libbz2-dev
</pre></div>
</div>
</li>
<li><p>Build and install</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>boost_1_55_0
sudo<span class="w"> </span>./bootstrap.sh<span class="w"> </span>--prefix<span class="o">=</span>/usr/local
sudo<span class="w"> </span>./b2<span class="w"> </span>install
</pre></div>
</div>
<p>If /usr/local/lib is not in your path:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>sh<span class="w"> </span>-c<span class="w"> </span><span class="s1">&#39;echo &quot;/usr/local/lib&quot; &gt;&gt; /etc/ld.so.conf.d/local.conf&#39;</span>
</pre></div>
</div>
<p>and finally:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>ldconfig
</pre></div>
</div>
</li>
</ol>
</li>
<li><p>Install Quantlib</p>
<ol class="loweralpha">
<li><p>Download Quantlib 1.5 from Quantlib.org and copy to /opt</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>wget<span class="w"> </span>-O<span class="w"> </span>QuantLib-1.5.tar.gz<span class="w">  </span><span class="se">\</span>
http://sourceforge.net/projects/quantlib/files/QuantLib/1.5/QuantLib-1.5.tar.gz/download
sudo<span class="w"> </span>cp<span class="w"> </span>QuantLib-1.5.tar.gz<span class="w"> </span>/opt
</pre></div>
</div>
</li>
<li><p>Extract the Quantlib folder</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>/opt
sudo<span class="w"> </span>tar<span class="w"> </span>xzvf<span class="w"> </span>QuantLib-1.5.tar.gz
</pre></div>
</div>
</li>
<li><p>Configure QuantLib</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>QuantLib-1.5
./configure<span class="w"> </span>--disable-static<span class="w"> </span><span class="nv">CXXFLAGS</span><span class="o">=</span>-O2<span class="w"> </span>--with-boost-include<span class="o">=</span>/usr/local/include<span class="w"> </span>--with-boost-lib<span class="o">=</span>/usr/local/lib
</pre></div>
</div>
</li>
<li><p>Make and install</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>make
sudo<span class="w"> </span>make<span class="w"> </span>install
</pre></div>
</div>
</li>
</ol>
</li>
<li><p>Install Cython. While you can install Cython from source, we strongly recommend to install Cython via <a class="reference external" href="https://pypi.python.org/pypi/pip">pip</a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">cython</span>
</pre></div>
</div>
<p>If you do not have the required permissions to install Python packages in the system path, you can install Cython in your local user account via:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">--</span><span class="n">user</span> <span class="n">cython</span>
</pre></div>
</div>
</li>
<li><p>Download pyql (<a class="reference external" href="https://github.com/enthought/pyql">https://github.com/enthought/pyql</a>), then extract, build and test:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>~/dev/pyql
$<span class="w"> </span>make<span class="w"> </span>build
$<span class="w"> </span>make<span class="w"> </span>tests
</pre></div>
</div>
</li>
</ol>
<p>If you have installed QuantLib in a directory different from <code class="code docutils literal notranslate"><span class="pre">/opt</span></code>, edit the <cite>setup.py</cite> file before running make and update the <code class="code docutils literal notranslate"><span class="pre">INCLUDE_DIRS</span></code> and <code class="code docutils literal notranslate"><span class="pre">LIBRARY_DIRS</span></code> to point to your installation of QuantLib.</p>
</section>
<section id="installation-from-source-on-windows">
<h2>Installation from source on Windows<a class="headerlink" href="#installation-from-source-on-windows" title="Permalink to this heading">¶</a></h2>
<p>The following instructions explain how to build the project from source, on a
Windows system.
The instructions have been tested on Windows 7 32bit with Visual Studio 2008.</p>
<p>Prerequisites:</p>
<ul class="simple">
<li><p>python 2.7 (e.g. Canopy with Cython 0.20 or above)</p></li>
<li><p>pandas 0.9</p></li>
</ul>
<ol class="arabic">
<li><p>Install Quantlib</p>
<ol class="loweralpha">
<li><p>Install the latest version of Boost from sourceforge. You can get the
binaries of 1.55 for windows 32 or 64bit depending on your target.</p></li>
<li><p>Download Quantlib 1.5 from Quantlib.org and unzip locally</p></li>
<li><p>Extract the Quantlib folder</p></li>
<li><p>Open the QuantLib_vc9 solution with Visual Studio</p></li>
<li><p>Patch ql/settings.hpp.</p>
<p>In the ql/settings.hpp file, update the Settings class defintion as
following (line 37):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">__declspec</span><span class="p">(</span><span class="n">dllexport</span><span class="p">)</span> <span class="n">Settings</span> <span class="p">:</span> <span class="n">public</span> <span class="n">Singleton</span><span class="o">&lt;</span><span class="n">Settings</span><span class="o">&gt;</span> <span class="p">{</span>
</pre></div>
</div>
</li>
<li><p>In the QuantLib project properties</p></li>
</ol>
<blockquote>
<div><ul class="simple">
<li><p>Change “General” -&gt; “Configuration type” to “Dynamic Library (DLL)”</p></li>
<li><p>Apply</p></li>
<li><p>Add the Boost include directory to “C/C++” -&gt; “Additional Include Directories”</p></li>
<li><p>Apply</p></li>
</ul>
<p>Do a first build to get all the object files generated</p>
</div></blockquote>
<ol class="loweralpha simple" start="7">
<li><p>Generate the def file:</p></li>
</ol>
<blockquote>
<div><p>In your PyQL clone, got the scripts directory, and edit the main function.
Set <cite>input_directory</cite> to the Release directory where your object files are
and change the <cite>output_file</cite> if appropriate (symbol_win32.def is the
default) ! The def file is platform specific (you can’t reuse a 32bit def
file for a 64bit linker).</p>
<p>This will generate a def file of about 44 Mb with all the needed symbols for
PyQL compilation.</p>
</div></blockquote>
<ol class="loweralpha simple" start="8">
<li><p>Build the dll with the new def file</p></li>
</ol>
<blockquote>
<div><ul class="simple">
<li><p>Change “Linker” -&gt; “Input” -&gt; “Module definition file” to point to
def file you just generated.</p></li>
<li><p>Apply the changes and build the project</p></li>
</ul>
</div></blockquote>
<ol class="lowerroman simple">
<li><p>Copy the QuantLib.dll to a directory which is on the PATH (or just the
PyQL directory if you’re in development mode)</p></li>
</ol>
</li>
<li><p>Install Cython. While you can install Cython from source, we strongly
recommend to install Cython via the Canopy Package Manager, another Python
distribution or via <a class="reference external" href="https://pypi.python.org/pypi/pip">pip</a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">cython</span>
</pre></div>
</div>
<p>If you do not have the required permissions to install Python packages in the system path, you can install Cython in your local user account via:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">--</span><span class="n">user</span> <span class="n">cython</span>
</pre></div>
</div>
</li>
<li><p>Build and test pyql</p>
<blockquote>
<div><p>Edit the setup.py to make sure the INCLUDE_DIRS and LIBRARY_DIRS point to
the correct directories.</p>
</div></blockquote>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>PS<span class="w"> </span>C:<span class="se">\d</span>ev<span class="se">\p</span>yql&gt;<span class="w"> </span>python<span class="w"> </span>setup.py<span class="w"> </span>build
PS<span class="w"> </span>C:<span class="se">\d</span>ev<span class="se">\p</span>yql&gt;<span class="w"> </span>python<span class="w"> </span>setup.py<span class="w"> </span>install
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Development mode</p>
<p>If you want to build the library in place and test things, you can do:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>PS<span class="w"> </span>C:<span class="se">\d</span>ev<span class="se">\p</span>yql&gt;<span class="w"> </span>python<span class="w"> </span>setup.py<span class="w"> </span>build_ext<span class="w"> </span>--inplace
PS<span class="w"> </span>C:<span class="se">\d</span>ev<span class="se">\p</span>yql&gt;<span class="w"> </span>python<span class="w"> </span>-m<span class="w"> </span>unittest<span class="w"> </span>discover<span class="w"> </span>-v
</pre></div>
</div>
</div>
</li>
</ol>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">Quantlib cython wrapper</a></h1>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Getting started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#pyql-an-overview">PyQL - an overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="#building-and-installing-pyql">Building and installing PyQL</a></li>
<li class="toctree-l2"><a class="reference internal" href="#installation-from-source">Installation from source</a></li>
<li class="toctree-l2"><a class="reference internal" href="#installation-from-source-on-windows">Installation from source on Windows</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="tutorial.html">Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="users_guide.html">User’s guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="reference_guide.html">Reference guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="roadmap.html">Roadmap</a></li>
<li class="toctree-l1"><a class="reference internal" href="roadmap.html#documentation">Documentation</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="index.html" title="previous chapter">Welcome to PyQL’s documentation</a></li>
      <li>Next: <a href="tutorial.html" title="next chapter">Tutorial</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2011, Didrik Pinte, Patrick Henaff.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 6.1.3</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.13</a>
      
      |
      <a href="_sources/getting_started.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>